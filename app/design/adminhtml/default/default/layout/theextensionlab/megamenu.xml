<?xml version="1.0"?>
<!--
* @category    TheExtensionLab
* @package     TheExtensionLab_MegaMenu
* @copyright   Copyright (c) 2015 TheExtensionLab (http://www.theextensionlab.com)
* @license     http://www.theextensionlab.com/license/license.txt - Commercial License
* @author      James Anelay @ TheExtensionLab <james@theextensionlab.com>
-->
<layout>
    <default>
        <reference name="head">
            <action method="addJs">
                <script>theextensionlab/megamenu/adminhtml/grid/json/serializer.js</script>
            </action>
        </reference>
    </default>

    <adminhtml_menu_catalog_product_widget_chooser>
        <block type="core/text_list" name="root" output="toHtml">
        </block>
    </adminhtml_menu_catalog_product_widget_chooser>

    <adminhtml_menu_catalog_product_widget_choosergridonly>
        <block type="core/text_list" name="root" output="toHtml">
        </block>
    </adminhtml_menu_catalog_product_widget_choosergridonly>

    <adminhtml_menu_attribute_option_widget_chooser>
        <block type="core/text_list" name="root" output="toHtml">
        </block>
    </adminhtml_menu_attribute_option_widget_chooser>

    <adminhtml_menu_attribute_option_widget_choosergridonly>
        <block type="core/text_list" name="root" output="toHtml">
        </block>
    </adminhtml_menu_attribute_option_widget_choosergridonly>

    <add_widget_override>
        <reference name="head">
            <action method="addJs"><script>theextensionlab/megamenu/wysiwyg/widget.js</script></action>
            <action method="addItem"><type>skin_css</type><name>theextensionlab/megamenu/css/widget/draggable.css</name></action>
        </reference>
    </add_widget_override>

    <editor>
        <update handle="add_widget_override"/>
    </editor>

    <adminhtml_widget_instance_edit>
        <update handle="add_widget_override"/>
    </adminhtml_widget_instance_edit>

    <adminhtml_mobile_edittemplate>
        <update handle="add_widget_override"/>
    </adminhtml_mobile_edittemplate>

    <adminhtml_widget_images_index>
        <remove name="footer" />
        <remove name="head" />
        <reference name="left">
            <block name="wysiwyg_images.js" type="adminhtml/cms_wysiwyg_images_content" template="cms/browser/js.phtml" />
            <block name="wysiwyg_images.tree" type="adminhtml/cms_wysiwyg_images_tree" template="cms/browser/tree.phtml" />
        </reference>
        <reference name="content">
            <block name="wysiwyg_images.content"  type="theextensionlab_megamenu/adminhtml_widget_images_content" template="cms/browser/content.phtml">
                <block name="wysiwyg_images.uploader" type="adminhtml/cms_wysiwyg_images_content_uploader" template="cms/browser/content/uploader.phtml" />
                <block name="wysiwyg_images.newfolder" type="adminhtml/cms_wysiwyg_images_content_newfolder" template="cms/browser/content/newfolder.phtml" />
            </block>
        </reference>
    </adminhtml_widget_images_index>

    <adminhtml_widget_images_contents>
        <block name="wysiwyg_images.files" type="adminhtml/cms_wysiwyg_images_content_files" template="cms/browser/content/files.phtml" output="toHtml" />
    </adminhtml_widget_images_contents>

</layout>